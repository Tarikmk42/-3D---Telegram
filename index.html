<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üßü 3D –ü—Ä–æ–∫–ª—è—Ç–∏–µ –ó–æ–º–±–∏-–§–µ—Ä–º—ã</title>
    <meta name="description" content="3D Telegram Mini App - —Å–ø–∞—Å–∏—Ç–µ —Ñ–µ—Ä–º—É –æ—Ç –∑–æ–º–±–∏ –≤ —Ç—Ä–µ—Ö–º–µ—Ä–Ω–æ–º –º–∏—Ä–µ!">
    
    <!-- Telegram Web App -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.min.js"></script>
    
    <!-- –°—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="style.css">
    
    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#4a6572">
</head>
<body>
    <div class="app">
        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è 3D —Å—Ü–µ–Ω—ã -->
        <div id="game-container" class="screen active">
            <canvas id="game-canvas"></canvas>
            
            <!-- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–≤–µ—Ä—Ö 3D -->
            <div class="ui-overlay">
                <!-- –ü–∞–Ω–µ–ª—å —Å—Ç–∞—Ç—É—Å–∞ -->
                <div class="status-panel">
                    <div class="player-info-3d">
                        <div class="avatar-3d">üë®‚Äçüåæ</div>
                        <div class="stats-3d">
                            <div class="stat">üèÜ <span id="score-3d">0</span></div>
                            <div class="stat">‚ù§Ô∏è <span id="lives-3d">3</span></div>
                            <div class="stat">‚è±Ô∏è <span id="time-3d">45:00</span></div>
                        </div>
                    </div>
                    
                    <div class="stage-info">
                        <div class="stage-progress">
                            <div class="progress-bar-3d">
                                <div class="progress-fill-3d" id="stage-progress-3d"></div>
                            </div>
                            <span>–≠—Ç–∞–ø <span id="current-stage-3d">1</span>/13</span>
                        </div>
                    </div>
                </div>

                <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
                <div class="control-panel">
                    <button id="move-forward" class="control-btn">‚Üë</button>
                    <div class="horizontal-controls">
                        <button id="move-left" class="control-btn">‚Üê</button>
                        <button id="interact" class="control-btn action-btn">‚ö°</button>
                        <button id="move-right" class="control-btn">‚Üí</button>
                    </div>
                    <button id="move-back" class="control-btn">‚Üì</button>
                </div>

                <!-- –ü–∞–Ω–µ–ª—å –¥–µ–π—Å—Ç–≤–∏–π -->
                <div class="action-panel-3d">
                    <div class="current-task" id="current-task-3d">
                        <h3>üéØ –¢–µ–∫—É—â–∞—è –∑–∞–¥–∞—á–∞</h3>
                        <p id="task-text-3d">–ù–∞–π–¥–∏—Ç–µ –∑–∞—Ä–∞–∂–µ–Ω–Ω–æ–µ —è–±–ª–æ–∫–æ —Å –∫–æ–¥–æ–º</p>
                    </div>
                    
                    <div class="quick-actions">
                        <button id="hint-3d" class="quick-btn" title="–ü–æ–¥—Å–∫–∞–∑–∫–∞">üí°</button>
                        <button id="map-3d" class="quick-btn" title="–ö–∞—Ä—Ç–∞">üó∫Ô∏è</button>
                        <button id="inventory-3d" class="quick-btn" title="–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å">üéí</button>
                        <button id="pause-3d" class="quick-btn" title="–ü–∞—É–∑–∞">‚è∏Ô∏è</button>
                    </div>
                </div>
            </div>

            <!-- –î–∏–∞–ª–æ–≥–æ–≤–æ–µ –æ–∫–Ω–æ -->
            <div id="dialog-modal" class="modal-3d hidden">
                <div class="dialog-content">
                    <div class="dialog-header">
                        <h3 id="dialog-title">–û–±–Ω–∞—Ä—É–∂–µ–Ω –ø—Ä–µ–¥–º–µ—Ç</h3>
                        <button id="close-dialog" class="close-btn">√ó</button>
                    </div>
                    <div class="dialog-body">
                        <div id="dialog-message">
                            –í—ã –Ω–∞—à–ª–∏ –∑–∞—Ä–∞–∂–µ–Ω–Ω–æ–µ —è–±–ª–æ–∫–æ! –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è.
                        </div>
                        <div class="dialog-input" id="dialog-input-area">
                            <input type="text" id="3d-answer-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥...">
                            <button id="submit-3d-answer">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ 3D -->
        <div id="loading-3d" class="screen">
            <div class="loading-3d-container">
                <div class="loading-animation">
                    <div class="farm-3d-model">üè†</div>
                    <div class="loading-circle"></div>
                </div>
                <h2>–ó–∞–≥—Ä—É–∂–∞–µ–º 3D —Ñ–µ—Ä–º—É...</h2>
                <div class="progress-bar-3d-loading">
                    <div class="progress-fill-3d-loading" id="loading-progress-3d"></div>
                </div>
                <p class="loading-tip-3d" id="loading-tip-3d">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è 3D –º–∏—Ä–∞...</p>
            </div>
        </div>

        <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é 3D -->
        <div id="main-menu-3d" class="screen">
            <div class="menu-3d-background">
                <canvas id="menu-canvas"></canvas>
            </div>
            
            <div class="menu-3d-content">
                <header class="menu-3d-header">
                    <h1 class="game-title-3d">üßü 3D –ü–†–û–ö–õ–Ø–¢–ò–ï<br>–ó–û–ú–ë–ò-–§–ï–†–ú–´</h1>
                    <p class="game-subtitle-3d">–ò—Å—Å–ª–µ–¥—É–π —Ñ–µ—Ä–º—É –≤ 3D –∏ —Å–ø–∞—Å–∏ –∂–∏–≤–æ—Ç–Ω—ã—Ö!</p>
                </header>
                
                <div class="menu-3d-buttons">
                    <button id="start-3d-game" class="btn-3d btn-3d-primary">
                        üéÆ –ù–ê–ß–ê–¢–¨ 3D –ò–ì–†–£
                    </button>
                    <button id="how-to-play-3d" class="btn-3d btn-3d-secondary">
                        üéÆ –£–ü–†–ê–í–õ–ï–ù–ò–ï
                    </button>
                    <button id="achievements-3d" class="btn-3d btn-3d-outline">
                        üèÜ –î–û–°–¢–ò–ñ–ï–ù–ò–Ø
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ó–≤—É–∫–∏ -->
    <audio id="3d-click-sound" preload="auto">
        <source src="assets/sounds/click.mp3" type="audio/mpeg">
    </audio>
    <audio id="3d-ambient" loop preload="auto">
        <source src="assets/sounds/farm-ambient.mp3" type="audio/mpeg">
    </audio>

    <script src="app-3d.js"></script>
</body>
</html>
